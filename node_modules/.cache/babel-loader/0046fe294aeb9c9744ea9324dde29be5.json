{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar d3_selection_1 = require(\"d3-selection\");\n\nvar DefaultNodeElement_1 = __importDefault(require(\"./DefaultNodeElement\"));\n\nvar Node =\n/** @class */\nfunction (_super) {\n  __extends(Node, _super);\n\n  function Node() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.nodeRef = null;\n    _this.state = {\n      transform: _this.setTransform(_this.props.position, _this.props.parent, _this.props.orientation, true),\n      initialStyle: {\n        opacity: 0\n      }\n    };\n\n    _this.shouldNodeTransform = function (ownProps, nextProps) {\n      return nextProps.subscriptions !== ownProps.subscriptions || nextProps.position.x !== ownProps.position.x || nextProps.position.y !== ownProps.position.y || nextProps.orientation !== ownProps.orientation;\n    }; // TODO: needs tests\n\n\n    _this.renderNodeElement = function () {\n      var _a = _this.props,\n          data = _a.data,\n          hierarchyPointNode = _a.hierarchyPointNode,\n          renderCustomNodeElement = _a.renderCustomNodeElement;\n\n      if (typeof renderCustomNodeElement === 'function') {\n        return renderCustomNodeElement({\n          hierarchyPointNode: hierarchyPointNode,\n          nodeDatum: data,\n          toggleNode: _this.handleNodeToggle\n        });\n      }\n\n      return DefaultNodeElement_1.default({\n        hierarchyPointNode: hierarchyPointNode,\n        nodeDatum: data,\n        toggleNode: _this.handleNodeToggle,\n        onNodeClick: _this.handleOnClick,\n        onNodeMouseOver: _this.handleOnMouseOver,\n        onNodeMouseOut: _this.handleOnMouseOut\n      });\n    };\n\n    _this.handleNodeToggle = function () {\n      return _this.props.onNodeToggle(_this.props.data.__rd3t.id);\n    };\n\n    _this.handleOnClick = function (evt) {\n      _this.props.onNodeClick(_this.props.hierarchyPointNode, evt);\n    };\n\n    _this.handleOnMouseOver = function (evt) {\n      _this.props.onNodeMouseOver(_this.props.hierarchyPointNode, evt);\n    };\n\n    _this.handleOnMouseOut = function (evt) {\n      _this.props.onNodeMouseOut(_this.props.hierarchyPointNode, evt);\n    };\n\n    return _this;\n  }\n\n  Node.prototype.componentDidMount = function () {\n    this.commitTransform();\n  };\n\n  Node.prototype.componentDidUpdate = function () {\n    this.commitTransform();\n  };\n\n  Node.prototype.shouldComponentUpdate = function (nextProps) {\n    return this.shouldNodeTransform(this.props, nextProps);\n  };\n\n  Node.prototype.setTransform = function (position, parent, orientation, shouldTranslateToOrigin) {\n    if (shouldTranslateToOrigin === void 0) {\n      shouldTranslateToOrigin = false;\n    }\n\n    if (shouldTranslateToOrigin) {\n      var hasParent = parent !== null && parent !== undefined;\n      var originX = hasParent ? parent.x : 0;\n      var originY = hasParent ? parent.y : 0;\n      return orientation === 'horizontal' ? \"translate(\" + originY + \",\" + originX + \")\" : \"translate(\" + originX + \",\" + originY + \")\";\n    }\n\n    return orientation === 'horizontal' ? \"translate(\" + position.y + \",\" + position.x + \")\" : \"translate(\" + position.x + \",\" + position.y + \")\";\n  };\n\n  Node.prototype.applyTransform = function (transform, transitionDuration, opacity, done) {\n    if (opacity === void 0) {\n      opacity = 1;\n    }\n\n    if (done === void 0) {\n      done = function () {};\n    }\n\n    if (this.props.enableLegacyTransitions) {\n      d3_selection_1.select(this.nodeRef) // @ts-ignore\n      .transition().duration(transitionDuration).attr('transform', transform).style('opacity', opacity).on('end', done);\n    } else {\n      d3_selection_1.select(this.nodeRef).attr('transform', transform).style('opacity', opacity);\n      done();\n    }\n  };\n\n  Node.prototype.commitTransform = function () {\n    var _a = this.props,\n        orientation = _a.orientation,\n        transitionDuration = _a.transitionDuration,\n        position = _a.position,\n        parent = _a.parent;\n    var transform = this.setTransform(position, parent, orientation);\n    this.applyTransform(transform, transitionDuration);\n  };\n\n  Node.prototype.componentWillLeave = function (done) {\n    var _a = this.props,\n        orientation = _a.orientation,\n        transitionDuration = _a.transitionDuration,\n        position = _a.position,\n        parent = _a.parent;\n    var transform = this.setTransform(position, parent, orientation, true);\n    this.applyTransform(transform, transitionDuration, 0, done);\n  };\n\n  Node.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        data = _a.data,\n        nodeClassName = _a.nodeClassName;\n    return react_1.default.createElement(\"g\", {\n      id: data.__rd3t.id,\n      ref: function (n) {\n        _this.nodeRef = n;\n      },\n      style: this.state.initialStyle,\n      className: [data.children ? 'rd3t-node' : 'rd3t-leaf-node', nodeClassName].join(' ').trim(),\n      transform: this.state.transform\n    }, this.renderNodeElement());\n  };\n\n  return Node;\n}(react_1.default.Component);\n\nexports.default = Node;","map":{"version":3,"sources":["C:/Users/Derek Reimanis/Documents/msusel/Pique-Lite/node_modules/react-d3-tree/lib/Node/index.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__importDefault","mod","__esModule","defineProperty","exports","value","react_1","require","d3_selection_1","DefaultNodeElement_1","Node","_super","_this","apply","arguments","nodeRef","state","transform","setTransform","props","position","parent","orientation","initialStyle","opacity","shouldNodeTransform","ownProps","nextProps","subscriptions","x","y","renderNodeElement","_a","data","hierarchyPointNode","renderCustomNodeElement","nodeDatum","toggleNode","handleNodeToggle","default","onNodeClick","handleOnClick","onNodeMouseOver","handleOnMouseOver","onNodeMouseOut","handleOnMouseOut","onNodeToggle","__rd3t","id","evt","componentDidMount","commitTransform","componentDidUpdate","shouldComponentUpdate","shouldTranslateToOrigin","hasParent","undefined","originX","originY","applyTransform","transitionDuration","done","enableLegacyTransitions","select","transition","duration","attr","style","on","componentWillLeave","render","nodeClassName","createElement","ref","n","className","children","join","trim","Component"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar d3_selection_1 = require(\"d3-selection\");\nvar DefaultNodeElement_1 = __importDefault(require(\"./DefaultNodeElement\"));\nvar Node = /** @class */ (function (_super) {\n    __extends(Node, _super);\n    function Node() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.nodeRef = null;\n        _this.state = {\n            transform: _this.setTransform(_this.props.position, _this.props.parent, _this.props.orientation, true),\n            initialStyle: {\n                opacity: 0,\n            },\n        };\n        _this.shouldNodeTransform = function (ownProps, nextProps) {\n            return nextProps.subscriptions !== ownProps.subscriptions ||\n                nextProps.position.x !== ownProps.position.x ||\n                nextProps.position.y !== ownProps.position.y ||\n                nextProps.orientation !== ownProps.orientation;\n        };\n        // TODO: needs tests\n        _this.renderNodeElement = function () {\n            var _a = _this.props, data = _a.data, hierarchyPointNode = _a.hierarchyPointNode, renderCustomNodeElement = _a.renderCustomNodeElement;\n            if (typeof renderCustomNodeElement === 'function') {\n                return renderCustomNodeElement({\n                    hierarchyPointNode: hierarchyPointNode,\n                    nodeDatum: data,\n                    toggleNode: _this.handleNodeToggle,\n                });\n            }\n            return DefaultNodeElement_1.default({\n                hierarchyPointNode: hierarchyPointNode,\n                nodeDatum: data,\n                toggleNode: _this.handleNodeToggle,\n                onNodeClick: _this.handleOnClick,\n                onNodeMouseOver: _this.handleOnMouseOver,\n                onNodeMouseOut: _this.handleOnMouseOut,\n            });\n        };\n        _this.handleNodeToggle = function () { return _this.props.onNodeToggle(_this.props.data.__rd3t.id); };\n        _this.handleOnClick = function (evt) {\n            _this.props.onNodeClick(_this.props.hierarchyPointNode, evt);\n        };\n        _this.handleOnMouseOver = function (evt) {\n            _this.props.onNodeMouseOver(_this.props.hierarchyPointNode, evt);\n        };\n        _this.handleOnMouseOut = function (evt) {\n            _this.props.onNodeMouseOut(_this.props.hierarchyPointNode, evt);\n        };\n        return _this;\n    }\n    Node.prototype.componentDidMount = function () {\n        this.commitTransform();\n    };\n    Node.prototype.componentDidUpdate = function () {\n        this.commitTransform();\n    };\n    Node.prototype.shouldComponentUpdate = function (nextProps) {\n        return this.shouldNodeTransform(this.props, nextProps);\n    };\n    Node.prototype.setTransform = function (position, parent, orientation, shouldTranslateToOrigin) {\n        if (shouldTranslateToOrigin === void 0) { shouldTranslateToOrigin = false; }\n        if (shouldTranslateToOrigin) {\n            var hasParent = parent !== null && parent !== undefined;\n            var originX = hasParent ? parent.x : 0;\n            var originY = hasParent ? parent.y : 0;\n            return orientation === 'horizontal'\n                ? \"translate(\" + originY + \",\" + originX + \")\"\n                : \"translate(\" + originX + \",\" + originY + \")\";\n        }\n        return orientation === 'horizontal'\n            ? \"translate(\" + position.y + \",\" + position.x + \")\"\n            : \"translate(\" + position.x + \",\" + position.y + \")\";\n    };\n    Node.prototype.applyTransform = function (transform, transitionDuration, opacity, done) {\n        if (opacity === void 0) { opacity = 1; }\n        if (done === void 0) { done = function () { }; }\n        if (this.props.enableLegacyTransitions) {\n            d3_selection_1.select(this.nodeRef)\n                // @ts-ignore\n                .transition()\n                .duration(transitionDuration)\n                .attr('transform', transform)\n                .style('opacity', opacity)\n                .on('end', done);\n        }\n        else {\n            d3_selection_1.select(this.nodeRef)\n                .attr('transform', transform)\n                .style('opacity', opacity);\n            done();\n        }\n    };\n    Node.prototype.commitTransform = function () {\n        var _a = this.props, orientation = _a.orientation, transitionDuration = _a.transitionDuration, position = _a.position, parent = _a.parent;\n        var transform = this.setTransform(position, parent, orientation);\n        this.applyTransform(transform, transitionDuration);\n    };\n    Node.prototype.componentWillLeave = function (done) {\n        var _a = this.props, orientation = _a.orientation, transitionDuration = _a.transitionDuration, position = _a.position, parent = _a.parent;\n        var transform = this.setTransform(position, parent, orientation, true);\n        this.applyTransform(transform, transitionDuration, 0, done);\n    };\n    Node.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, data = _a.data, nodeClassName = _a.nodeClassName;\n        return (react_1.default.createElement(\"g\", { id: data.__rd3t.id, ref: function (n) {\n                _this.nodeRef = n;\n            }, style: this.state.initialStyle, className: [data.children ? 'rd3t-node' : 'rd3t-leaf-node', nodeClassName].join(' ').trim(), transform: this.state.transform }, this.renderNodeElement()));\n    };\n    return Node;\n}(react_1.default.Component));\nexports.default = Node;\n"]},"metadata":{},"sourceType":"script"}